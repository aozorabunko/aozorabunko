<HTML><HEAD>

<TITLE>校閲君に親しもう　Macintosh版</TITLE>

<style type="text/css">

<!--

body { margin-left: 10%; margin-right: 10%; }

-->

</style>

</HEAD>

<BODY BGCOLOR="#FFFFFF"> 

<H3>校閲君に親しもう　<FONT SIZE="-1">Macintosh版</FONT></H3>

校閲君は、Perlという言語で作られたプログラムです。<BR>

<BR>

Perl言語を組み込めば、インターネット経由でオンライン版にアクセスしなくても、手許のマシンで校閲君が使えます。<BR>

<BR>

プログラムの中味をのぞいて、校閲君の手順を確認したり、必要に応じてプログラムを書き換え、機能に変更を加えることも可能です。<BR>

<BR>

<HR>

<H4><A NAME="1">【校閲君を自分のマシンで使う】</A></H4>

校閲君を手許のパソコンで使うためには、Perl言語と校閲君のプログラムの双方を、そろえておくことが必要です。<BR>

<BR>

Macintosh用の日本語対応Perlは、MacJperlと名付けられています。<BR>

<A HREF="http://www2s.biglobe.ne.jp/~LUNA/bsc/MacPerl/" TARGET="_TOP">「猫に真珠」</A>の<A HREF="http://www2s.biglobe.ne.jp/~LUNA/bsc/MacPerl/MacPerl_1.html" TARGET="_TOP">「最初の一歩　―ともあれ動かしてみよう―」</A>、「(1) インストールする」の指示に従って、MacJperlを導入してください。<BR>

<BR>

続いて<A HREF="shinji_check_droplet.sit">こちらから</A>Macintosh用の校閲君を引き落としてください。<BR>

<BR>

Macintosh用の校閲君は、StuffIt形式で圧縮された状態（ファイル名は、「shinji_check_droplet.sit」）でダウンロードされます。<BR>

StuffIt Expanderがインストールしてあれば、自動的に解凍され、富士山にラクダのマーク、ファイル名「shinji_check_droplet」のアイコンが現れるはずです。<BR>

<BR>

Macintoshでは、チェックするファイルをアイコンにドラッグ＆ドロップすると、校閲君が新字、俗字を洗い出します。<BR>

<BR>

手許に適当な旧字のファイルがなければ、ここでも<A HREF="kanzanjittoku.zip">森鴎外の「寒山拾得」</A>（kanzanjittoku.txt）を使ってみましょう。<BR>

<BR>

チェックするファイルを校閲君にドロップすると、同じ場所（同じフォールダー内、元ファイルをFinderに置いていた場合はFinder上）に、検査結果を書き込んだファイルが、白紙のアイコンの形で新しく作られます。<BR>

<BR>

もともとのファイル名の後ろに、「.rep」と付いているのを確認してください。

「kanzanjittoku.txt」をドロップすると、「kanzanjittoku.txt.rep」ができているはずです。<BR>

<BR>

いつも使っているエディターで、「.rep」の付いたチェック済みファイルを開いてみて下さい。<BR>

<BR>

<IMG SRC="result.gif" WIDTH="516" HEIGHT="540"><BR>

<BR>

<FONT SIZE="-1">

●Macintosh用校閲君のチェック結果。オンライン版と同様、▼の右がファイルに使用されている新字もしくは俗字。そのとなりに、代替候補の旧字もしくは正字。<BR>

<BR>

</FONT>

<BR>

<H4><A NAME="2">【校閲君の手順をのぞく】</A></H4>

校閲君が、何をどんなふうに見ているか、作業手順をのぞいてみましょう。<BR>

<BR>

MacJPerlのアイコンをダブルクリックして、起動してください。<BR>

メニューの「ファイル」から「開く」を選びます。<BR>

ダイアログボックスで、校閲君（ファイル名は、「shinji_check_droplet」です。）を探して選択し、「開く」をクリックしてください。<BR>

<BR>

<IMG SRC="dialog_box.gif" WIDTH="356" HEIGHT="177"><BR>

<BR>

<FONT SIZE="-1">

●ここでは、あらかじめ「校閲君」というフォルダーを作り、そこに「shinji_check_droplet」をおさめておいた。解凍した校閲君をFinder上に置いていれば、「shinji_check_droplet」はそこで見つかる。<BR>

<BR>

</FONT>

校閲君の中味が、以下のように表示されるでしょう。<BR>

<BR>

<IMG SRC="script1.gif" WIDTH="570" HEIGHT="277"><BR>

<BR>

1行目の、「# 旧字体に置き換え可能か調べるスクリプト」のように、頭に「#」のマークが付いているところはすべて、作者の大野裕さんが付した、コメントです。（コメントの部分は、プログラムとしては実行されません。）<BR>

ともかくコメントのところだけ、最初にざっと目を通してみてください。<BR>

<BR>

次に、校閲君が何をしているか、上から順に確認していきましょう。<BR>

<BR>

<IMG SRC="script2.gif" WIDTH="569" HEIGHT="358"><BR>

<BR>

青く反転させているところは、新字と旧字の対応リストです。<BR>

二文字ずつ、漢字がペアになっているところの冒頭に、「亜亞」が並んでいます。<BR>

検査対象のファイルの中に新字の「亜」があると、校閲君は旧字の「亞」を添えて、「▼亜亞▲」の形で置換します。<BR>

<BR>

次に、「# その他の異体字のうち、無条件の置き換えが問題なさそうなもの」を見ていきましょう。<BR>

<BR>

<IMG SRC="script3.gif" WIDTH="571" HEIGHT="88"><BR>

<BR>

「@itaiji = qw(」以下に示された、「芦蘆」からはじまる組み合わせが、チェックの対象となっているセットです。ここには、俗字（略字）と正字の組み合わせが並んでいます。<BR>

<BR>

一方、「# 抜いたもの」には、チェックするべきか否か検討した結果、大野さんが「外そう」と決めたものが並んでいます。<BR>

<BR>

しばらく校閲君を使ってみると、「この字のチェックは不要だな」と思われるものが出てくるかも知れません。<BR>

例えば、「@itaiji = qw(」から続く行の最後から二番目に入っている、「言云」に関しては、形が明らかに違っていて、入力時・校正時に不注意で見逃す可能性は低いはずだから、外しても良いかもしれません。<BR>

<BR>

そうしたければ、「言云」を「# 抜いたもの」にうつします。<BR>

これで、「言」が「▼言云▲」に置き換えられることはなくなります。<BR>

<BR>

「# 他にもこんなのもある」に置かれたものも、この状態ではチェックされません。<BR>

<BR>

<BR>

<H4><A NAME="3">【校閲君の隠し機能】</A></H4>

<BR>

「# その他の置き換えリスト」以下には、現時点では発揮されていない、校閲君の秘められた力が組み込まれています。<BR>

<BR>

<IMG SRC="script4.gif" WIDTH="571" HEIGHT="101"><BR>

<BR>

「互換包摂の29字」と「包摂除外の104字」が何を意味するかは、<A HREF="https://www.aozora.gr.jp/newJIS-Kanji/newJIS5.html#5-2" TARGET="_TOP">【注意が必要な「包摂の扱いが変わる文字」】</A>を参照してください。<BR>

<BR>

あなたがMacJPerlの表示フォントを、KandataもしくはHabianに切り替えていなければ、置き換えの候補として示される文字は、上の図のように白抜きの□で示されているでしょう。<BR>

<BR>

MacJPerlのメニューの「編集」から「編集様式」を選び、フォントをKandataもしくはHabianに切り替えると、下の図のように置き換えの候補として示される文字を確認できるようになります。<BR>

<BR>

<IMG SRC="font.gif" WIDTH="387" HEIGHT="201"><BR>

<BR>

<IMG SRC="script5.gif" WIDTH="570" HEIGHT="105"><BR>

<BR>

例えば「互換包摂の29字」をチェックさせたいときには、「# @newjis_a = qw(」の頭に付いている「#」を削除します。<BR>

<BR>

<IMG SRC="script6.gif" WIDTH="571" HEIGHT="64"><BR>

<BR>

コメントを意味する「#」が外れたことで、校閲君はこの部分もプログラムの一部であると解釈し、「# @newjis_a = qw(」以下のペアも処理するようになります。<BR>

<BR>

「包摂除外の104字」をチェックさせたいときも、同様に「# @newjis_b = qw(」の頭の「# 」を削除してください。<BR>

<BR>

旧字のファイルを、第3第4水準も使って作る場合には、「互換包摂の29字」と「包摂除外の104字」のチェックが必要です。<BR>

<BR>

一方、青空文庫が現時点の標準的な作業手順としている、第1第2水準の範囲で作る場合には、<FONT COLOR="RED">この二種類のチェックは必要はありません</FONT>。<BR>

（第3第4水準、Kandata、Habianなどは、かなり込み入った新しい話題です。これらの言葉を、あなたがこの文書ではじめてご覧になったのなら、意味が分からなくて当然です。<A HREF="http://aozora.gr.jp/newJIS-Kanji/newJIS1.html" TARGET="_TOP">「新JIS漢字時代の扉を開こう！」</A>という文書で、平易を心がけてこれらについて説明していますので、参照してみてください。）<BR>

<BR>

「# 一つの配列に」以下には、校閲君の処理の手順が記述されています。<BR>

<BR>

Perlスクリプトの組み立て方には、ここでは立ち入りません。<BR>

興味のある方は、下に示した関連ページ、書籍などから、踏み込んでいってください。<BR>

<BR>

<HR>

<FONT SIZE="-1">

・青空文庫メーリングリストに集うPerl諸賢、大野裕さん、結城浩さん、LUNA CATさんの尽力によって、校閲君をはじめ、さまざまな編集・校正支援ツールが開発されています。<BR>

・<A HREF="http://aozora.gr.jp/newJIS-Kanji/newJIS1.html" TARGET="_TOP">「新JIS漢字時代の扉を開こう！」</A>の<A HREF="http://aozora.gr.jp/newJIS-Kanji/newJIS5.html#5-2" TARGET="_TOP">【注意が必要な「包摂の扱いが変わる文字」】</A>で紹介している、結城浩さんによる<A HREF="http://www.hyuki.com/aozora/checker.cgi" TARGET="_TOP">「文字チェッカー」</A>は、青空文庫に届けられたPerlからの最初の贈り物です。<BR>

・結城さんは、<A HREF="http://www.hyuki.com/aozora/" TARGET="_TOP">「青空文庫の応援ページ」</A>を開いて、プログラム開発の側から、活動を支援してくださっています。<BR>

・大野裕さんは、青空文庫の活動を支援するさまざまなツールを、<A HREF="http://www.venus.dti.ne.jp/~yohno/probun/tools.html" TARGET="_TOP">「プロ文工作員の道具箱」</A>で公開されています。<BR>

・本来WindowsユーザーであるLUNA CATさんは、Macintosh向けのPerl情報が不足している現状を踏まえて、<A HREF="http://www2s.biglobe.ne.jp/~LUNA/bsc/MacPerl/" TARGET="_TOP">「猫に真珠(Perl)−−−青空文庫のためのMacPerl超入門−−−」</A>を書いてくれました。このページの「番外編」にはWindowsで使えるプログラムの情報も整理されています。<BR>

・結城浩さんが、Perlによるプログラミングの入門書<A HREF="http://www.hyuki.com/pb/" TARGET="_TOP">「Perl言語プログラミングレッスン　入門編」</A>（ソフトバンク パブリッシング）を書かれました。<BR>

<BR>

</FONT>

<HR>

<A HREF="online_kosakukun.html">戻る。</A><BR>

<A HREF="index.html">目次にもどる。</A><BR>

</BODY>

</HTML>

